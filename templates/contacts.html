{% extends "base.html" %}

{% block title %}{{ title }}{% endblock%}

{% block content%}

    <h2 class="headline">Twoje kontakty</h2><br>

<div class="back-button-container">
  <a href="{{ url_for('logged') }}">
    <button type="button" class="back-button">Cofnij</button>
  </a>
</div>


{% for contact in contacts %}
    <div class="contact-container">
        <div class="contact-info">
            <p>
                <a href="{{ url_for('user_profile', contact_id=contact[0]) }}">
                    {{ contact[1] }} {{ contact[2] }}
                </a>

            </p>
        </div>
        <div class="delete-button">
            <form method="post" action="{{ url_for('delete_contact', contact_id=contact[0]) }}">
                <button type="submit" class="delete-user-btn">Usuń</button>
            </form>
        </div>
    </div>
    <div class="contact-separator"></div>
{% endfor %}

<script>
  // Pobierz wszystkie przyciski "Usuń"
  const deleteButtons = document.querySelectorAll('.delete-user-btn');

  // Dodaj obsługę zdarzenia kliknięcia dla każdego przycisku "Usuń"
  deleteButtons.forEach(button => {
    button.addEventListener('click', () => {
      event.preventDefault();
      // Wyświetl okno dialogowe z pytaniem
      const confirmed = confirm("Czy na pewno chcesz usunąć tego użytkownika?");

      // Jeśli użytkownik potwierdzi, prześlij formularz do usunięcia użytkownika
      if (confirmed) {
        button.closest('form').submit();
      }
    });
  });
</script>



{% endblock %}